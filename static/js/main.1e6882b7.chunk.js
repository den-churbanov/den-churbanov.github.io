(this["webpackJsonpupload-files"]=this["webpackJsonpupload-files"]||[]).push([[0],{15:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(8),c=n.n(r),i=n(7),s=(n(19),n(3)),o=(n(15),n(0)),l=function(e){var t=e.buffer,n=e.name,r=e.size,c=e.idx,i=e.upload,l=e.progress,u=e.link,f=e.deleteFile,d=Object(a.useState)(null),b=Object(s.a)(d,2),p=b[0],j=b[1];Object(a.useEffect)((function(){j({buffer:t,name:n,size:r,idx:c})}),[t,j]);var g=p&&Object(o.jsxs)(o.Fragment,{children:[!i&&Object(o.jsx)("div",{className:"preview-remove",onClick:function(e){return f(e,c)},children:"\xd7"}),Object(o.jsx)("img",{src:p.buffer,alt:p.name}),Object(o.jsx)("div",{className:"preview-info ".concat(i?"upload":""),children:i?Object(o.jsx)("div",{className:"preview-info-progress",style:{width:l+"%"},children:Object(o.jsx)("span",{children:l+"%"})}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("span",{children:p.name}),Object(o.jsx)("span",{children:p.size})]})})]});return Object(o.jsx)("div",{className:"preview-image",unselectable:"true",children:u?Object(o.jsx)("a",{className:"preview-link",href:u,target:"_blank",children:g}):g})},u=function(e){var t=e.accept,n=void 0===t?["image/png","image/jpg","image/jpeg","image/gif"]:t,r=e.onUpload,c=Object(a.useState)([]),i=Object(s.a)(c,2),u=i[0],f=i[1],d=Object(a.useState)([]),b=Object(s.a)(d,2),p=b[0],j=b[1],g=Object(a.useState)({state:!1,count:0}),m=Object(s.a)(g,2),h=m[0],O=m[1],v=Object(a.useState)([]),x=Object(s.a)(v,2),D=x[0],y=x[1],w=Object(a.useState)(!1),N=Object(s.a)(w,2),E=N[0],S=N[1],k=Object(a.useState)([]),A=Object(s.a)(k,2),z=A[0],B=A[1],M=Object(a.useState)(!1),R=Object(s.a)(M,2),F=R[0],I=R[1],L=Object(a.useRef)(null),C=Object(a.useRef)(null),T=Object(a.useRef)(null);Object(a.useEffect)((function(){if(T.current){var e=0;z.map((function(t){return e+=t})),e===100*u.length?T.current.disabled=!1:T.current.disabled||(T.current.disabled=!0)}}),[z]);var U=function(){j([]),S(!1),B(new Array(u.length).fill(0)),y(new Array(u.length).fill("")),C.current&&(C.current.disabled=!1)},_=function(e){e instanceof Object&&(e=Array.from(e)),O({state:!0,count:e.length});var t=[];e.forEach((function(e){e.type.match("image")&&t.push(function(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(n){t({file:e,buffer:n.target.result})},a.onerror=n,a.readAsDataURL(e)}))}(e))}));var n=[];Promise.all(t).then((function(e){e.forEach((function(e,t){n.push({buffer:e.buffer,name:e.file.name,size:P(e.file.size),idx:t})})),j(n),O({state:!1,count:0})}))},P=function(e){if(!e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return"".concat(Math.round(e/Math.pow(1024,t))," ").concat(["Bytes","KB","MB","GB","TB"][t])},H=function(e,t){var n=e.target.parentElement;n.classList.add("delete-animation");var a=p.filter((function(e,n){return n!==t})),r=u.filter((function(e,n){return n!==t}));setTimeout((function(){n.classList.remove("delete-animation"),f(r),j(a)}),300)},J=function(e){e.preventDefault(),U(),I(!0)},K=function(e){e.preventDefault(),I(!1)},q=function(e,t){y((function(n){var a=n.slice();return a[e]=t,a}))},G=function(e,t){B((function(n){var a=n.slice();return a[e]=t,a}))},Q=function(e){e.preventDefault(),e.stopPropagation()};return Object(o.jsx)("div",{className:"upload_plugin_container",children:Object(o.jsx)("div",{className:"card",children:F?Object(o.jsx)("div",{className:"drop-area",onDragEnter:J,onDragOver:J,onDragLeave:K,onDragExit:K,onDrop:function(e){console.log("dropHandler"),e.preventDefault(),f(Array.from(e.dataTransfer.files)),U(),_(e.dataTransfer.files),I(!1)},children:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0444\u0430\u0439\u043b\u044b \u0441\u044e\u0434\u0430"}):Object(o.jsxs)("div",{className:"card-wrapper",onDragEnter:J,onDragLeave:K,onDragExit:K,onDragOver:J,children:[Object(o.jsx)("input",{type:"file",multiple:!0,accept:Array.isArray(n)?n.join(","):"",ref:L,onChange:function(e){e.preventDefault(),e.target.files.length&&(f(Array.from(e.target.files)),_(e.target.files))}}),Object(o.jsx)("button",{className:"btn",onClick:function(e){e.preventDefault(),f([]),U(),L.current.click()},ref:T,children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"}),p.length?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("button",{className:"btn primary",onClick:function(){r(u,G,q),S(!0),C.current.disabled=!0},ref:C,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"}),Object(o.jsx)("div",{className:"preview",onDragStart:Q,onDrag:Q,onDragExit:Q,children:p.map((function(e,t){return Object(o.jsx)(l,{buffer:e.buffer,name:e.name,size:e.size,upload:E,progress:z[t],link:D[t],idx:t,deleteFile:H},t)}))})]}):h.state?Object(o.jsx)("span",{className:"loading",children:"\u0424\u0430\u0439\u043b".concat(h.count>1?"\u044b \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f":" \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f","...")}):null]})})})};n(17);i.a.initializeApp({apiKey:"AIzaSyDPg-E7U6xRShibqH6ptMbCed_jercNfvQ",authDomain:"upload-files-9d7e9.firebaseapp.com",projectId:"upload-files-9d7e9",storageBucket:"upload-files-9d7e9.appspot.com",messagingSenderId:"247597627595",appId:"1:247597627595:web:9080a2f6ab6b87428b034e"});var f=i.a.storage();c.a.render(Object(o.jsx)(u,{onUpload:function(e,t,n){e.forEach((function(e,a){var r=f.ref("images/".concat(e.name)).put(e);r.on("state_changed",(function(e){var n=Math.round(e.bytesTransferred/e.totalBytes*100);t(a,n)}),(function(e){alert(e)}),(function(){r.snapshot.ref.getDownloadURL().then((function(e){n(a,e)}))}))}))}}),document.getElementById("container"))}},[[18,1,2]]]);
//# sourceMappingURL=main.1e6882b7.chunk.js.map